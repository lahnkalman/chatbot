<!doctype html>
<html lang="he" dir="rtl">
<head>
    <meta charset="utf-8">
    <title>×¡×•×›×Ÿ ×”×§×¦××” ×œ×™××•×“×™</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body { font-family: Arial, sans-serif; background:#f6f7fb; margin:0; }
        .wrap { max-width: 1100px; margin: 0 auto; padding: 20px; }
        .card { background:#fff; border:1px solid #e6e6e6; border-radius:12px; padding:16px; margin-top:16px; }
        .grid { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
        @media (max-width: 800px){ .grid { grid-template-columns: 1fr; } }
        label { display:block; margin-top:10px; font-weight:600; }
        input, select { width:100%; padding:10px; border:1px solid #ccc; border-radius:10px; margin-top:6px; }
        button { width:100%; padding:12px; border:0; border-radius:10px; background:#2f6fed; color:#fff; font-size:16px; cursor:pointer; margin-top:14px; }
        ul { margin: 10px 0 0 0; padding: 0 18px 0 0; }
        .chart-box { width: 320px; max-width: 100%; margin:auto; }
        .muted { color:#555; }
    </style>
</head>

<body>
<div class="wrap">

    <h2>ğŸ¤– ×¡×•×›×Ÿ ×”×§×¦××” ×œ×™××•×“×™ (×›×¡×£ ××“×•××”)</h2>

    <div class="card">
        <form method="post">

            <label>×¡×›×•× (×©"×—)</label>
            <input type="number" name="amount" required value="{{ profile.amount if profile }}">

            <label>××•×¤×§ ×–××Ÿ (×©× ×™×)</label>
            <input type="number" name="years" required value="{{ profile.years if profile }}">

            <label>×¨××ª ×¡×™×›×•×Ÿ</label>
            <select name="risk">
                <option>× ××•×š</option>
                <option>×‘×™× ×•× ×™</option>
                <option>×’×‘×•×”</option>
            </select>

            <label>× ×–×™×œ×•×ª</label>
            <select name="liquidity">
                <option>×’×‘×•×”×”</option>
                <option>×‘×™× ×•× ×™×ª</option>
                <option>× ××•×›×”</option>
            </select>

            <label>×™×¢×“</label>
            <select name="goal">
                <option>×©××™×¨×” ×¢×œ ×¢×¨×š (×©××¨× ×™)</option>
                <option>××™×–×•×Ÿ (×‘×™× ×™×™×)</option>
                <option>×¦××™×—×” (××’×¨×¡×™×‘×™)</option>
            </select>

            <label>× ×™×¡×™×•×Ÿ</label>
            <select name="experience">
                <option>××ª×—×™×œ</option>
                <option>×‘×™× ×•× ×™</option>
                <option>×× ×•×¡×”</option>
            </select>

            <button type="submit">×—×©×‘ ×”×§×¦××”</button>
            <div class="muted">âš ï¸ ×¡×™××•×œ×˜×•×¨ ×œ×™××•×“×™ ×‘×œ×‘×“. ×œ× ×™×™×¢×•×¥ ×”×©×§×¢×•×ª.</div>
        </form>
    </div>

    {% if result %}
    <div class="card">
        <h3>ğŸ“Š ×”×§×¦××” ××“×•××”</h3>
        <ul>
            {% for k, v in result.items() %}
                <li>{{ k }} â€” {{ v }} ×©"×—</li>
            {% endfor %}
        </ul>

        {% if notes %}
            <p class="muted">{{ notes }}</p>
        {% endif %}

        <div class="chart-box">
            <canvas id="pie"></canvas>
        </div>
    </div>

    <script>
        const labels = {{ result.keys()|list|tojson }};
        const values = {{ result.values()|list|tojson }};

        new Chart(document.getElementById("pie"), {
            type: "pie",
            data: {
                labels: labels,
                datasets: [{ data: values }]
            },
            options: { responsive: true }
        });
    </script>
    {% endif %}

</div>
</body>
</html>
